import { ASCError } from '~/core/errors';

let activeUser: Pick<Amity.User, '_id' | 'userId' | 'path' | 'displayName'> | null = null;

/**
 * for internal use
 */
export const getActiveUser = () => {
  if (!activeUser) {
    throw new ASCError(
      'Connect client first',
      Amity.ClientError.UNKNOWN_ERROR,
      Amity.ErrorLevel.FATAL,
    );
  }

  return activeUser!;
};

export const setActiveUser = (user: Amity.User) => {
  activeUser = {
    _id: user._id,
    userId: user.userId,
    path: user.path,
  };
};
