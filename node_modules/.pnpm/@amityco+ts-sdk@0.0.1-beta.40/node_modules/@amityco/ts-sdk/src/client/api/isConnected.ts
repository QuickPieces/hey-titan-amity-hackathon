import { getActiveClient } from './activeClient';

/**
 * ```js
 * import { isConnected } from '@amityco/ts-sdk'
 * const connected = isConnected()
 * ```
 *
 * Checks if a {@link Amity.Client} instance is connected to ASC servers
 *
 * @returns a success boolean if connected
 *
 * @category Client API
 */
export const isConnected = (): boolean => {
  const client = getActiveClient();
  client.log('client/api/isConnected', client);

  return !!(
    client.userId &&
    String(client.http.defaults.headers.common?.Authorization)?.length &&
    client.ws.connected
  );
};
